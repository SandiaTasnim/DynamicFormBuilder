
@model EmployeeModel

<div class="alert alert-warning">
    <i class="bi bi-exclamation-triangle-fill"></i>
    Are you sure you want to delete the employee
    <strong>@Model.FullName</strong>?
</div>

<form asp-action="DeleteConfirmed" asp-route-id="@Model.Id" method="post" id="deleteEmployeeForm">
    @Html.AntiForgeryToken()
    <div class="d-flex justify-content-end gap-2">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-danger">Delete</button>
    </div>
</form>

<script src="~/lib/jquery/dist/jquery.min.js"></script>

<script>
    $(document).ready(function() {
        $('#deleteEmployeeForm').submit(function(e) {
            e.preventDefault();

            $.ajax({
                url: $(this).attr('action'),
                type: 'POST',
                data: $(this).serialize(),
                headers: { 'X-Requested-With': 'XMLHttpRequest' },
                success: function(result) {
                    if (result.success) {
                        // Close modal
                        var modal = bootstrap.Modal.getInstance(document.getElementById('deleteEmployeeModal'));
                        modal.hide();

                        // Show success message
                        alert(result.message);

                        // Reload page to show updated data
                        location.reload();
                    } else {
                        alert(result.message || 'Error deleting employee');
                    }
                },
                error: function() {
                    alert('Error deleting employee');
                }
            });
        });
    });
</script>